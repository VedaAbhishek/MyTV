<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Settings</title>
    <style>
      body {
        background: #f4f6f8;
        font-family: "Poppins", sans-serif;
        color: #333;
        padding: 40px;
      }

      h1 {
        color: #222;
        margin-bottom: 10px;
      }

      a {
        display: inline-block;
        margin-bottom: 20px;
        text-decoration: none;
        color: #fff;
        background: #2196f3;
        padding: 8px 14px;
        border-radius: 8px;
        font-weight: bold;
        transition: background 0.3s;
      }

      a:hover {
        background: #42a5f5;
      }

      form {
        margin-bottom: 20px;
      }

      input,
      button {
        margin: 5px;
        padding: 8px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }

      button {
        background: #2196f3;
        color: white;
        border: none;
        cursor: pointer;
        transition: background 0.3s;
      }

      button:hover {
        background: #42a5f5;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      th,
      td {
        padding: 12px;
        border-bottom: 1px solid #eee;
        text-align: center;
      }

      th {
        background: #2196f3;
        color: white;
      }

      tr:hover {
        background: #f1faff;
      }

      .error {
        color: #ff4b5c;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1>Settings</h1>
    <div th:if="${error}" class="error" th:text="${error}"></div>
    <a href="/vid">‚Üê Back to MyTV</a>

    <h2>Add Video</h2>
    <form action="/settings/add" method="post">
      <input
        type="url"
        name="youtubeLink"
        placeholder="YouTube link"
        required
      />
      <input
        type="number"
        name="durationInSeconds"
        placeholder="Duration (seconds)"
        required
      />
      <input type="date" name="scheduledDate" required />
      <input type="time" name="scheduledTime" step="1" required />
      <button>Add</button>
    </form>

    <h2>Schedule</h2>
    <table>
      <tr>
        <th>ID</th>
        <th>Link</th>
        <th>Duration</th>
        <th>Date</th>
        <th>Time</th>
        <th>Update</th>
        <th>Delete</th>
      </tr>
      <tr th:each="video : ${videos}">
        <form th:action="@{/settings/update}" method="post">
          <td>
            <input type="hidden" name="id" th:value="${video.id}" /><span
              th:text="${video.id}"
            ></span>
          </td>
          <td>
            <input
              type="url"
              name="youtubeLink"
              th:value="${video.youtubeLink}"
              required
            />
          </td>
          <td>
            <input
              type="number"
              name="durationInSeconds"
              th:value="${video.durationInSeconds}"
              required
            />
          </td>
          <td>
            <input
              type="date"
              name="scheduledDate"
              th:value="${video.scheduledDate}"
              required
            />
          </td>
          <td>
            <input
              type="time"
              name="scheduledTime"
              step="1"
              th:value="${video.scheduledTime}"
              required
            />
          </td>
          <td><button type="submit">Update</button></td>
        </form>
        <td>
          <form
            th:action="@{/settings/delete/{id}(id=${video.id})}"
            method="post"
          >
            <button style="background: #ff4b5c">X</button>
          </form>
        </td>
      </tr>
    </table>
  </body>
</html>
